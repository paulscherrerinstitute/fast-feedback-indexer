{% set version = "1.0.0" %}

package:
    name: ffbidx
    version: {{ version }}

source:
    git_url: https://github.com/paulscherrerinstitute/fast-feedback-indexer.git  # [linux and py>=35]
    git_rev: {{ "v"+version }}

build:
    number: 0

requirements:
    build:
        - {{ compiler('cxx') }}
        - {{ stdlib('c') }}
        - meson
        - conda-forge::cuda-compiler >=10.0.0
        - numpy <2.0
    build:
        skip: True  # [not linux or py<35]
    run:
        - numpy <2.0
        - conda-forge::cuda-cudart >=10.0.0

test:
    imports:
        - ffbidx

about:
    home: https://github.com/paulscherrerinstitute/fast-feedback-indexer
    license: BSD-3-Clause
    license_family: BSD
    license_file: LICENSE.md
    license_url: https://github.com/paulscherrerinstitute/fast-feedback-indexer/LICENSE.md
    summary: "Fast feedback indexer library with python module for xray crystallography"
    description: |
        Fast feedback indexer library with the python module for xray crystallography.
        Paper reference: https://doi.org/10.1107/S1600576724003182
        Code repository: https://github.com/paulscherrerinstitute/fast-feedback-indexer
    dev_url: https://github.com/paulscherrerinstitute/fast-feedback-indexer
    doc_url: https://github.com/paulscherrerinstitute/fast-feedback-indexer/blob/main/python/README.md

extra:
  recipe-maintainers:
        - hcstadler
